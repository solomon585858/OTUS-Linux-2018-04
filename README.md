# OTUS-Linux-2018-04
Repository for Linux group

## Homework 1
 - В рамках первого ДЗ была подготовлена виртуальная машина на базе **CentOS**
 - Для сборки ядра была скачана версия **3.16.56** с сайта *http://www.kernel.org*
 - Было собрано ядро
 - Результирующий файл конфигурации (**.config**) и файл со списком того, что было установлено (**yum.log**), были выложены в папке **HW-1**

## Homework 2
 - В рамках второго ДЗ было протестировано создание RAID для виртуальной машины, созданной с помощью **Vagrantfile**; также была протестировано ломание и починка **RAID**
 - Был видоизменен **Vagrantfile**, включающий теперь создание пяти дисков и **RAID 5** на базе них. Также при создании виртуальной машины из **Vagrantfile** создаются пять **GPT** партиций размером 100 MiB
 - Результирующий **Vagrantfile** и скрипт для создания RAID с партициями **startup_scripts.sh** были выложены в папке **HW-2**

## Homework 3
 - В рамках третьего ДЗ были протестированы работа LVM, работа со LVM снэпшотами. Логи работы с машиной были выложены в файле **log.txt**, лежащего в папке **HW-3**. Для работы с LVM была использована тестовая виртуалка VMware.
 - Выложил результат логов команд для части задания по уменьшению / до 8G в файле **log_8G.txt**. Для этой задачи использовал виртуальную машину, поднятую на Vagrant. Для уменьшения XFS до 8G использовать RescueCD. 
 - Для уменьшения партиции использовал метод, описанный в статье **http://www.hhutzler.de/blog/shrinking-xfs-partition/**: 1) сделал бэкап root партиции с помощью xfsdump, 2) дропнул старый root logical volume и восстановил root партицию из бэкапа 

## Homework 4
 - В рамках четвертого ДЗ было протестированы способы попадания в систему без пароля. Список методов и их описание приведено в файле **boot_without_root_password.txt**, лежащего в папке **HW-4**
 - Была установлена система с LVM, после чего была переименована VG. Логи команд приведены в файле **rename_vg.txt**, лежащего в папке **HW-4**
 - Был добавлен модуль в **initrd**. Логи команд приведены в файле **add_module_to_initrd.txt**, лежащего в папке **HW-4**

## Homework 5
 - Был добавлен скрипт **uptime.sh** для проверки сервиса **Apache HTTP**. При неработающем сервисе скрипт запускает сервис **Apache HTTP**. Скрипт проверяет состояние сервиса каждые пять минут. Для этого добавляем запись в cron в виде  */5 * * * * /root/uptime.sh > /dev/null 2>/dev/null. Файл **uptime.sh** и запись в cron (файл **add to crontab for uptime script.txt**) выложены в папке **HW-5**. Этот скрипт также отправляет сообщение на e-mail в случае, если сервис не запущен.
 - Был добавлен скрипт **multiple_launch.sh**, который предотвращает повторный запуск по **cron**-у. Пример приведен для задачи синхронизации файлов. Файл выложен в папке **HW-5**.
 - Был добавлен скрипт **apache_log.sh**, который выдает следующие данные по Apache на базе логфайла: минимальное/среднее/максимальное время отклика, список IP адресов "посетителей" сервера, количество запросов для IP адресов "посетителей" сервера, список запросов IP-страниц в реальном времени. Пример результата скрипта показан в файле **apache_result.txt**. Файлы выложены в папке **HW-5**.
- Был добавлен скрипт **watchdog.sh**, который является общим и который можно модифицировать для того системного сервиса, который нам нужен. Необходимо запускать в виде **cron job**-а под **root**. Файл выложен в папке **HW-5**.

## Homework 6
 - В рамках задания для написания сервиса, который будет раз в 30 секунд мониторить лог на предмет наличия ключевого слова был добавлен файл **journalctl.txt** в папку **HW-6**. В нем приведены логи команд для решения данной задачи.
 - В рамках задания для установки **spawn-fcgi** написания сервиса, который будет раз в 30 секунд мониторить лог на предмет наличия ключевого слова был добавлен файл **spawn-fcgi.txt** в папку **HW-6**. В нем приведены логи команд для решения данной задачи.
 - В рамках задания для запуска несколько инстансов **apache** был добавлен файл **multiple_apache_instances.txt** в папку **HW-6**. В нем приведены логи команд для решения данной задачи.

 ## Homework 7
 - В рамках задания для написания своей релизации аналога **lsof** был добавлен скрипт **script_lsof_alternative.sh**, который показывает открытые файлы из файловой системы **proc** 
 